import { migrateAllTenants } from '../utils/tenant'
import { getMongoDbClient } from '@/utils/mongodb-utils'
import { Tenant } from '@/services/accounts'
import { RiskScoringService } from '@/services/risk-scoring'
import { getDynamoDbClient } from '@/utils/dynamodb'
import { envIs } from '@/utils/env'

const userIds = [
  '04f94e3f-a7ff-4fbf-bb50-f2ba4e4ae26d',
  '06d5a0d3-c51c-408c-a549-2ecc53cc5a82',
  '07ea4b9a-e34a-4bd9-acf0-ba75a4e727cb',
  '0aaa2ef6-2546-4e50-8287-d62d6c7a3abe',
  '147066ea-5a0d-4eaa-9dc5-db68c6653ef0',
  '149a2e05-2f20-4301-a297-99dd1400b684',
  '19725346-16e2-458d-9c3a-46cbd5830696',
  '1ea167c9-ac06-40bf-a3e7-b51b899b0fd7',
  '1ecc2721-d741-4d5f-9c75-edaf950f41f7',
  '1ecca766-434b-4bd1-93ab-f723a1237426',
  '20d82753-67fd-421b-981d-fdfbee2b0a0a',
  '24a1ce9c-7497-4e8b-bbde-1801f5284c1e',
  '29568e81-9f62-4b5a-87f6-e139122bcd79',
  '2a554f58-2f3d-4914-92d5-d2e03a581c4f',
  '2f06d1f4-cb73-4adc-9773-646a9b9d07d7',
  '2f8b818d-e8b3-415b-b460-51262c2d8372',
  '2f8fd4b3-262d-42f6-a1c2-487281f556d1',
  '34caf9c4-53c1-4409-a15f-8a8be25028ce',
  '3876f6bd-3df9-41b3-b933-037fdd854a9b',
  '42a5459b-172a-4c54-b0e8-53d012bd056e',
  '42a6c604-e069-43b8-9b05-c378c29491c2',
  '42b64d62-3d25-44d0-aca2-4640ee03895e',
  '4736bdc2-8f8d-4dab-93c2-6ea3dd4e0bc6',
  '4f5a2f6a-e6ec-475e-ae51-b2ef1692df3e',
  '578c1db5-c539-4533-b0ae-1bf0064f6f0c',
  '5bfeac1b-7450-44ae-b36e-e49bc2c52486',
  '5d4be290-8fba-4036-8919-c4434d11fb2c',
  '63dc8aea-3cb7-4b93-8797-a0b2f0d12847',
  '641bdadd-9d9b-44f5-a64b-496994b6ece9',
  '6751aab9-f56b-4a67-b981-1774afc1025e',
  '6b047554-fba6-468f-a168-01a4a27abc29',
  '6cf73475-a757-4f34-871f-a3be9595b986',
  '6eed0a3f-b47e-4367-8ce7-c3dbe014c41d',
  '6f7d2d58-39ca-4cae-b3f8-c4962f43d58d',
  '73da2df4-7ad5-4624-966e-7de8f09b8b2d',
  '7572c545-8247-4f89-819f-85c0ffd3493e',
  '7991fc3d-0b00-4e81-87a9-8b827509b49f',
  '79e1fb47-1447-47ff-b976-36e5d315220b',
  '7c08c763-8f32-4990-9f9d-caa673c8bbf2',
  '7f4e899b-33ba-4c14-9800-dd6ea57ecb71',
  '8139df5f-e118-4b4f-992a-10d80505017f',
  '81c9c66b-958a-41f8-a929-5c2e17af73e7',
  '826030fc-a9df-45ab-8e66-4e463c8d4b63',
  '82c7263e-f74e-41b6-981d-3ff90bec286f',
  '8344f8c4-bd71-406d-8159-eafea8054f37',
  '85386b7f-0ef2-4875-a75b-f6335d5be000',
  '88cd9619-deea-4c8d-8f04-c734b383dea2',
  '8d82a8a0-5cbe-4e22-835f-739025bdf84e',
  '951f33c0-20e0-4d6d-adf0-e3c2a761e935',
  '9a48607e-28a4-480c-b346-1a4f255ca00d',
  '9db80eb4-b0d1-40ef-b2f1-703d74246c82',
  'a418265c-d623-4d7a-84fe-d91db98961b0',
  'a749de25-4e14-4c9d-b9bf-98545e8ed65d',
  'aa874292-9142-4664-98e7-4d54139155c6',
  'ad36bb6b-d7a5-48fe-b16c-ae461fe1897e',
  'afbb4fce-cc98-48a4-9897-c6f1e3bedd74',
  'b2cfd469-e894-4c7b-9109-c3572dd14d93',
  'b72744c7-c2eb-4845-95cd-063dc7ddf5ac',
  'baedd8f6-2bce-454a-9acc-fbb9e06a5e5b',
  'bbb518be-3895-45cf-a07a-a6ce431c5aa8',
  'c1ac1c4a-b449-4043-b662-20e3df69b281',
  'c2981c1b-f549-4c5f-ba38-ecc6c07ee28f',
  'c8d2d617-0c76-4bad-9460-cf8e05d6a81a',
  'cb3a43d1-0dac-4ba9-8699-4d3ce29c9795',
  'cedb0ab1-f464-4b1a-a19d-eefa34dcc4c9',
  'cefb2da9-3aaa-4c1e-881c-560344b76367',
  'd12bf42d-08f5-47ef-8f4f-625a3cb6b014',
  'd4cdb9e3-e889-42d1-aaeb-0d5dd211f374',
  'd6b87c44-b4ed-421c-8396-a1231ac26cec',
  'd7b8bbf7-837c-4896-8c3c-6afe3a9c7815',
  'd907b8a2-04df-42aa-a93c-ff928b50b654',
  'df2d0bb9-b71b-4a38-b7f1-32b4225ba6be',
  'df790102-efe0-4526-94a8-32b5b460d421',
  'e60f28a1-5f85-4199-b2cd-f04dd6ad4a6b',
  'f4d4b73e-fce3-4e44-a9bd-e4776f77ebe5',
  'f5363544-ae3f-4659-b5ed-2a4766dac46b',
  'f76a3f90-8823-4eca-ac3f-8063f8b40141',
  'e123734f-b1e7-414b-8f41-8cb976b81e5d',
  '25b67985-d75c-452e-9c89-0bf85181ec1b',
  '5a70dc78-1cca-4a80-a807-fd5152ff69f6',
  '74aba637-f0d8-40fa-ac80-5c2a1a4fba04',
  '7f70be86-55b0-480f-8ffb-33785a70d22a',
  '8a18585c-df08-4e38-a112-2a725b2bac26',
  'c2accf95-ff63-4406-a1d8-606067e3bffa',
  'd0893464-09d4-4b55-9d76-f136e8ce3626',
  'd9dae310-d08b-46ff-b679-77b4106b020d',
  '11aaa2df-52db-4df2-8018-1da6eddf74f7',
  '592524b6-2ec9-4c6a-95a2-9c84081f2e31',
  'a5a36e4e-b85e-4b73-84ad-ae4f0a2dce3c',
  'afbd3322-ad54-4b1a-a1fe-53583e8806fd',
  'bcf6ada8-005c-4073-ab9a-bde88f5ee1c3',
  'f8b6b13d-b298-4b21-acb4-3d3db90b9be3',
  '0cd876de-26b2-465e-a46d-de3bc01baf70',
  '33e8a796-6154-426e-ad54-b454fcfffd26',
  '685ffc25-3e0c-4587-b932-93be2c6b22fa',
  '7081c3cf-44a9-4317-b38f-2453f41b8272',
  '70defa7b-1115-4b0f-b909-dcb285b03691',
  'b0452516-91cd-495e-b9cc-48b63df54038',
  'b36ca08c-99a4-4c5c-8bb5-0f87f001b23d',
  'bdddccae-3a0b-4691-a03e-30148c7e93af',
  'd825693d-7ce5-4822-8198-f8df765164ed',
  'f956b6ab-bf08-4f26-b8b6-a8907fe02b02',
  '0051cdf4-7a24-4d67-a166-a5512641390b',
  '021c512f-2279-4675-93b0-2ae246294e71',
  '111720f2-655e-4e1c-ac3e-a8ca90a9e6a3',
  '1621c984-01fa-49d2-9f98-190ae879ec61',
  '179e15e9-f5c6-4f0d-b489-1561da5f5e2e',
  '1b2d6b76-ae01-4b8a-ac11-2706a68795b3',
  '2dde86fc-d992-4dd9-b712-19b07f3d746a',
  '2e57a431-f8f9-4217-bdf9-763d366e79fd',
  '3aad7b18-b9d7-4c3e-b907-3ab756f9e68f',
  '40e617c3-ecec-4c77-887c-5a4ecac25fa4',
  '4ce31f2b-5724-417f-a522-38d31cdde23e',
  '5ad808a1-cab2-4778-964f-2c73faab391a',
  '5d47f6e4-afd6-4eb5-bae1-df41032c5163',
  '6afe25ed-5e7c-4c55-9c98-f60f1bf5791c',
  '77127567-6f57-4c20-99ba-8f83b500372b',
  '7d21a587-a02d-469b-a279-6fed3c946958',
  '8815375c-524e-4cc5-ac51-b928015f2ee7',
  '8892b350-2f52-4a86-8a73-6776dc7cb0d6',
  '8bfd2765-e733-4193-a2e7-d2d00441c58c',
  '9924582d-a6f7-4d42-9b94-0d413d08a843',
  '9938560c-eba5-40ee-9bd3-721008a4e667',
  '997dce4b-1434-4141-b5d4-38b44616cda1',
  '9d316ce1-f6ce-4024-b15a-e49d3825e4f7',
  'aede0682-c5af-4943-a226-bfdbb43cc28d',
  'b14f7169-2dae-45a4-b173-c9e4303e86f2',
  'b57be31f-e627-4445-8896-c6fdc537e214',
  'b662d8ff-a3c3-4535-871b-ffdd9a8eceb0',
  'b997071f-c812-451c-86b9-80bcb4997280',
  'bd9052d8-8dc3-45e2-9c23-994871ad0ecd',
  'bd9ee7d0-91f9-4861-8262-b1c1fe70ab05',
  'bf0b2d70-4496-4570-a376-1769e5d947f9',
  'c1ae4c59-3bc1-45d8-b2b8-9594d217ceaa',
  'c634e05f-f59f-4f76-b474-6b7c95abfb2b',
  'c7e92deb-3804-4274-ab60-223053988d55',
  'cad6386f-2ac5-4073-b768-3ec238a321fe',
  'cd02e7c4-1f9b-48c4-80b4-9d959b070771',
  'ce88c260-b74b-45df-997e-e7ae28d3f9b6',
  'cf6747bf-85a4-41ff-83f9-77ff4cd6f8c3',
  'd09c2109-b89c-4afc-ac72-d7f951be2b30',
  'da35b91a-269f-438b-8727-355e5285c923',
  'dc91b97e-eff0-499a-b956-834ef57ee4b3',
  'e64a1bf3-8361-4e51-9cee-ecb42c682627',
  'f072aae4-5436-40e2-aa8b-5bcd54f923a4',
  'faca3981-bf28-41e5-915e-d54eb5b643e9',
  'fef70a83-6f20-4666-a80d-7133962b7d15',
  '144e6153-c659-4ef7-a2e0-e21a0b32f99a',
  '17c8c665-f276-49c0-a177-4ebc8221ad13',
  '184bcd23-170a-4abc-856b-ed17b84b5f5c',
  '1b899f9d-2e6e-4085-a3c7-0c0798f939d8',
  '1ec99344-8ed1-4f4f-a148-138f3591fc60',
  '306d3ff1-92bc-4014-8eb1-94fdb98d4990',
  '30edc8ed-0b60-4bb9-8d22-04c8fe55c6aa',
  '32713281-e8d9-4132-b258-05b2f35a7c4b',
  '387d304f-2fe4-4aff-b2b6-a57527020cfe',
  '463478c6-9449-445a-aa02-4fc34134110c',
  '4842e837-993d-4eff-b533-2828cd15d929',
  '504aad7d-255e-4486-81b7-e1f7acea5bd4',
  '69158fa5-7076-4029-979e-7d252db6a2d8',
  '6eede532-c059-4a3e-a492-f145545377f5',
  '731dc928-5ae1-411a-8f36-39b31602c534',
  '7ad2242e-792b-4dbb-bd33-447d77bc6de0',
  '7ec5fb55-bb31-46c9-99a8-6d8c1b2e8b43',
  '7ff23434-d521-4987-b8e0-4e627018f4c4',
  '803d7666-83c1-4981-a144-7be8bbe66bc6',
  '87b85404-e9ba-4ab1-bbe9-33144a90f393',
  '8fdc0e91-cac6-4a25-8850-910a9c0b9ab5',
  '97945946-9c8f-4fea-938f-80c1517f4a1e',
  'a9fc73e5-be34-4fb3-b84d-7390b0f4ebab',
  'ae108a40-78ba-4ad8-9445-7e2fe6656658',
  'aee97c9f-d9ce-4a5a-9c5e-51cdc2496364',
  'b44300e5-8d81-4c5d-8daf-2437a0f861ea',
  'b57f7750-4d01-4d74-a8d3-2fe4f53f9f39',
  'c9b9b983-d01e-40be-8231-b635df428dab',
  'cde19e30-759c-4fa7-adbe-611d4a6a6f1e',
  'd06bd201-9b58-4fc4-8bc2-efb65d90a05e',
  'd7eff0e7-b589-4009-9353-db995c5c5ed7',
  'da563b19-cb08-4669-a61d-119278824deb',
  'e0263c67-cd10-467a-b3c0-c03a1240e196',
  'e66afb4c-2809-4b36-b8bf-4e84e136d0f8',
  'f7e42a29-499e-41af-a9ae-844166a0085d',
  'fb4417ae-e759-46b7-b291-aac7be3bcb17',
  'ffd4ea43-2923-4b19-a501-b5eec5fe7f82',
  '01cb7f55-3916-4337-95f4-5cb87c54179f',
  '069c19d7-e8e5-4966-8542-6e5e9924e7c3',
  '09c34b7d-f677-4e76-be8c-a3d7a7fcd22e',
  '0a2ea73c-e60c-49c3-aff7-5600ca05ef63',
  '0af71aed-2c9a-42df-9291-74b02aec85e2',
  '0e2beffe-971c-4d3e-bd10-5a40893aab2f',
  '11342f1d-4afe-4075-8a2d-5c62db3dc8bb',
  '12ceaa87-7236-4c64-9a27-681d6badd43f',
  '16930b3f-76d7-468e-ab12-f461161fe027',
  '1cfc9dad-562e-4ef4-97e9-8ed27ce8198c',
  '1ef614b6-82b7-40ab-affa-e109a605181a',
  '1f5b7566-2aa3-47b5-99db-6a762b877fc0',
  '2e7feb7a-045d-46da-b7c3-fdc3d9db3979',
  '37b2610d-2d3e-4043-ae51-14c49eaa01f5',
  '3dbf8864-0c83-49e0-9e98-b129a6975c35',
  '4251c3b2-89a4-4be2-8aee-5881e04828d2',
  '53876df1-4792-4df3-a9c8-3e6b74783886',
  '5409cf3e-6ca2-4168-9a3a-251027808dbe',
  '5cdd4992-f6b6-4eb0-be8f-59c3b81f30eb',
  '5f7c476d-d956-4fbb-8030-ea720480640d',
  '604242b7-0b36-430f-b224-544298d5fdcc',
  '61bb181b-4c65-4486-bdfe-fd693785f722',
  '62dd51f6-1bb3-4fcf-a5db-ce196775208a',
  '632e9c64-dc5a-4678-98a2-b626a3b92b0a',
  '64442823-8844-4d8b-bcc6-1a79d5e0bb46',
  '64ee55e1-67b2-44b6-b9c9-94d7de3ef368',
  '67635de2-0c8c-4dc5-b60d-3330148d155d',
  '6bb9cd6d-19ca-4952-9f74-7e7f44966bd0',
  '6bf08b89-250a-4f29-b9ad-328c18ec0fe5',
  '6caaaaa7-58bf-48d1-84d6-da89a4ff3632',
  '70455ce1-9eb1-4f2f-a388-29148e51e9d7',
  '71d4650f-9971-4191-927e-597468eebc26',
  '7434cef1-0e64-4b94-8e78-e323b2537e01',
  '7736f8c5-e88e-4222-9a42-013df71a6cfb',
  '7c4a3405-770b-469d-9f7b-3c2edf2780e7',
  '7f9016d8-c330-4bc2-af4e-acd588d92e33',
  '838d2156-8e5c-40f0-9d4d-be07b8e54110',
  '856046c8-41f8-4a3c-99d1-2ef55a7cd90a',
  '88262c8a-8ec8-4720-bb65-48de88c396d7',
  '8dca2c26-bcf7-47bd-b351-a05275ed3e9d',
  '8eca5433-d9f4-415a-9350-59aac4a220e8',
  '924c924b-8909-46cb-a4ac-43387b39f30f',
  '9388ace8-0c1e-4281-990f-3158382f7631',
  '99fc0368-f601-47fe-a549-c12942a5e457',
  'a3fa8881-79f6-413a-8034-dfae69f41b6e',
  'a6f0fb2f-2110-4845-a632-32aa1a2ece19',
  'a748762e-78ae-432c-9700-1448a9431baa',
  'a9e8780b-81e8-4741-ad0c-409b32c2656c',
  'b2155105-36f8-4288-8227-5076f40f8bdc',
  'b31cba21-7bfb-409b-8cf1-25bf2aadce3e',
  'b7900ea9-c56b-42b7-8d97-a8e417da1097',
  'b89f77cc-557d-4b06-8368-e8c4d42c7647',
  'bc8c4f60-096f-4427-8f0d-86ccc87fc136',
  'c2d900bf-5a4e-4f22-987d-4c182c5dea4e',
  'c6e37aeb-23f4-45af-bd2e-aaa383208ac8',
  'c80d1453-88b1-43f2-9dae-bcd3abfc30c0',
  'cc0d88d7-9299-40cd-a747-0df420cdb309',
  'd29bc421-47fa-44a5-8341-984033b72c8c',
  'd435d20b-653c-4ab7-9824-56586142e108',
  'd4d4f939-f334-4e93-bd14-9a073dceae4e',
  'd5bbd2de-d050-4c03-98d8-3be6317bd7c1',
  'da448c92-8f57-4f4a-b01c-41098bce7fcf',
  'dc940a8c-d2f7-4c4c-ba6e-b51e3b4298c1',
  'ea62b871-70d9-4fc8-a35d-f3bdff36c578',
  'ecb20d6c-da8b-4918-bb57-8ef02ef1630f',
  'edf366e8-2448-4db8-8637-4cddfac673b6',
  'efd9d6c7-e1d2-4c43-b09f-3b4cd372807e',
  'f0e1e7e7-8525-4a47-b514-9edd36d2a9a5',
  'ffe5a7de-e8de-4439-b1f7-731aa6bda8dd',
  '14297507-d5a7-49a5-a38b-f178af2abe47',
  '252e314c-cbcf-4683-b8ef-901c67f54680',
  '2621c7d8-8bbc-4586-b5f2-c23c46c34646',
  '27909a87-9d6b-457b-9d8c-045a269af1b4',
  '2acfa0b3-1fd8-4667-943c-b4036b309d5c',
  '2c16eb26-27c2-4f62-b2be-54f733699521',
  '2e9fb604-495c-40f2-b13a-3e4471a642e2',
  '3c7b207c-fa37-4a70-b993-bbe96222c51c',
  '450efa57-01b7-4abb-b56e-67cfb0030cd9',
  '696964fe-0597-4381-9a1b-6c10ed31f795',
  '73795e2d-2d8c-49f8-a5e1-ea56b57a5fc9',
  '77f60762-0753-4456-b292-b58c38d163a0',
  '7bdebb9b-cdc7-4d91-93d0-82d159f10586',
  '7dc74377-1766-4bf3-824c-4263a0667b88',
  '89a33f7e-28cd-4a83-9f55-b7f52590990a',
  '95e0968e-1d09-4ad1-965d-3f1c25afbf05',
  '9c37ef3d-9bac-41a7-bace-80306ac1b490',
  'a45548b1-40de-46fe-9926-13775612cad3',
  'ba6a5b3d-cbdb-4a9e-a97d-162b9c1b3366',
  'cf789266-4bd9-4ed8-ab50-a2ded1133758',
  'e2267eec-fd26-4093-8d25-a09ebee9bc2d',
  'f8a5c404-614a-4206-8fd7-c5ff41631804',
]

async function migrateTenant(tenant: Tenant) {
  if (envIs('local') || (envIs('prod') && tenant.id === 'FT398YYJMD')) {
    const dynamoDb = getDynamoDbClient()
    const mongoDb = await getMongoDbClient()
    const riskScoringService = new RiskScoringService(tenant.id, {
      dynamoDb,
      mongoDb,
    })

    for await (const userId of userIds) {
      await riskScoringService.reCalculateKrsAndDrsScores(userId)
    }
  }
}

export const up = async () => {
  await migrateAllTenants(migrateTenant)
}
export const down = async () => {
  // skip
}
